# SURVIBE AI 12月期サイト - プロジェクト構造設計

## 概要
Next.js + MongoDB + Mongoose + MUIを使用したお問い合わせフォーム付きランディングページのプロジェクト構造設計

## 技術スタック

### Frontend
- **Next.js 14+**: App Router使用
- **TypeScript**: 型安全性
- **Material-UI (MUI)**: UIコンポーネントライブラリ
- **React Hook Form**: フォーム状態管理
- **Zod**: スキーマバリデーション

### Backend
- **Next.js API Routes**: バックエンドAPI
- **MongoDB**: NoSQLデータベース
- **Mongoose**: MongoDB ODM

### Infrastructure
- **Vercel**: デプロイ・ホスティング
- **MongoDB Atlas**: データベースホスティング

## プロジェクト構造

```
survibe-ai-dec2025/
├── app/                          # Next.js App Router
│   ├── layout.tsx               # ルートレイアウト
│   ├── page.tsx                 # ホームページ（ランディングページ）
│   ├── globals.css              # グローバルスタイル
│   │
│   ├── api/                     # API Routes
│   │   └── contact/            # お問い合わせAPI
│   │       └── route.ts        # POST /api/contact
│   │
│   └── (marketing)/            # マーケティングページ（ルートグループ）
│       ├── courses/             # コース詳細ページ
│       │   ├── prompt-basics/  # プロンプト基礎コース
│       │   │   └── page.tsx
│       │   └── ai-development/ # AI共同開発コース
│       │       └── page.tsx
│       └── contact/            # お問い合わせページ
│           └── page.tsx
│
├── components/                   # Reactコンポーネント
│   ├── ui/                     # UIコンポーネント
│   │   ├── Button.tsx
│   │   ├── Card.tsx
│   │   └── Input.tsx
│   │
│   ├── layout/                 # レイアウトコンポーネント
│   │   ├── Header.tsx
│   │   ├── Footer.tsx
│   │   └── Navigation.tsx
│   │
│   ├── sections/               # セクションコンポーネント
│   │   ├── Hero.tsx           # ヒーローセクション
│   │   ├── CourseOverview.tsx # コース概要
│   │   ├── Features.tsx       # 特徴
│   │   └── ContactForm.tsx   # お問い合わせフォーム
│   │
│   └── forms/                  # フォームコンポーネント
│       └── ContactForm.tsx
│
├── lib/                         # ユーティリティ・ライブラリ
│   ├── db/                     # データベース関連
│   │   ├── mongoose.ts        # Mongoose接続
│   │   └── models/            # Mongooseモデル
│   │       └── Contact.ts     # お問い合わせモデル
│   │
│   ├── utils/                  # ユーティリティ関数
│   │   └── validation.ts     # バリデーション関数
│   │
│   └── constants/             # 定数
│       └── courses.ts         # コース情報
│
├── types/                       # TypeScript型定義
│   ├── contact.ts             # お問い合わせ型
│   └── course.ts               # コース型
│
├── public/                      # 静的ファイル
│   ├── images/                # 画像
│   └── favicon.ico
│
├── .env.local                  # 環境変数（ローカル）
├── .env.example               # 環境変数の例
├── .gitignore
├── next.config.js             # Next.js設定
├── package.json               # 依存関係
├── tsconfig.json              # TypeScript設定
└── tailwind.config.js         # Tailwind設定（MUIと併用する場合）
```

## 主要ファイルの説明

### app/page.tsx
ランディングページのメインページ。ヒーローセクション、コース概要、お問い合わせフォームを含む。

### app/api/contact/route.ts
お問い合わせフォームの送信を処理するAPI Route。MongoDBにデータを保存。

### components/sections/ContactForm.tsx
お問い合わせフォームコンポーネント。React Hook FormとZodを使用。

### lib/db/models/Contact.ts
Mongooseモデル定義。お問い合わせデータのスキーマを定義。

## データベース設計

### Contact Collection
```typescript
{
  _id: ObjectId,
  name: string,           // お名前
  email: string,          // メールアドレス
  course: string,         // コース選択（'prompt-basics' | 'ai-development'）
  message?: string,       // メッセージ（任意）
  createdAt: Date,        // 作成日時
  status: string          // ステータス（'new' | 'contacted' | 'closed'）
}
```

## API設計

### POST /api/contact
お問い合わせフォームの送信

**Request Body:**
```typescript
{
  name: string;
  email: string;
  course: 'prompt-basics' | 'ai-development';
  message?: string;
}
```

**Response:**
```typescript
{
  success: boolean;
  message: string;
  data?: {
    id: string;
  }
}
```

## 環境変数

```bash
# .env.local
MONGODB_URI=mongodb+srv://...
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

## デプロイ設定

### Vercel
- 環境変数をVercelダッシュボードで設定
- MongoDB Atlasの接続文字列を設定
- 自動デプロイ（GitHub連携）

## 開発フロー

1. **セットアップ**
   ```bash
   npx create-next-app@latest survibe-ai-dec2025 --typescript --tailwind --app
   cd survibe-ai-dec2025
   npm install @mui/material @emotion/react @emotion/styled mongoose zod react-hook-form @hookform/resolvers
   ```

2. **MongoDB接続設定**
   - MongoDB Atlasでクラスター作成
   - 接続文字列を環境変数に設定
   - Mongoose接続を実装

3. **コンポーネント実装**
   - レイアウトコンポーネント
   - セクションコンポーネント
   - フォームコンポーネント

4. **API実装**
   - お問い合わせAPI Route
   - バリデーション
   - エラーハンドリング

5. **デプロイ**
   - Vercelにデプロイ
   - 環境変数設定
   - 動作確認

## 関連ノート
- [[00-プロジェクト概要]]
- [[技術スタック詳細]]
- [[デザインシステム]]

---
tags: [project-structure, nextjs, mongodb, design]
created: 2025-11-13

